<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>Armenian Radio Stations | Live</title>
<script id="backup_json" type='text/javascript' src='https://raw.githubusercontent.com/djgago/xbmc.script.audio.radiohy/master/resources/lib/backup.json'></script>
<script type='text/javascript'  src='http://code.jquery.com/jquery-1.8.3.js'></script>

<style type="text/css">
html, body {
    margin:0;
    padding:0;
    font-family:Tahoma,Arial,Helvetica,Sans-Serif;
}

.station_text {
    color: red;
    padding-top: 15px;
    text-align: center; 
    font: bold;
}

.main_block {
    width: 790px;
    position: absolute;
    left: 20%;
}

.radio_block {
    width: 780px;
    float: left;
}

.radio_block:nth-child(odd)     { background:#e7e7e7; }
.radio_block:nth-child(even)    { background:#f7f7f7; }

.mix_logo {}

.mix_logo_wrapper {
    height: 48px;
    width: 176px;
    float: left;
}

.radio_button { float:right; }

.stop {
    height: 21px;
    width: 23px;
    background: url(http://live.mix.am/img/on_off.png) no-repeat -21px 0px;
    margin-top: 13px;
    margin-right: 15px;
    cursor: pointer;
}

.playing {background-position: 0px 0px;}

.player {
    display:none;
    visibility: hidden;
    height: 0;
    position: absolute;
    overflow: hidden;
}

.active_icon {background-position: -21px 0px;}

</style>

<script>

$(document).ready(function()
{
        var uri = stations.backup;
        var lst = uri.uri;
        var n = lst.length;
        var dvx = document.getElementById('source_div');
        var rds = document.getElementById('stations_list');

        var div = dvx.cloneNode(true);
        rds.removeChild(dvx);

        for (var i = 0; i < n; i++) {
            var e = lst[i];
            var clone = div.cloneNode(true);
            var mpl = clone.getElementsByTagName("embed")[0];

            var url = e.protocol + '://' + e.hostname + ':' + 
                e.port + '/' + e.path;
            
            var str = "&autostart=1&duration=-1&viral.onpause=false&" +
                "viral.oncomplete=false&viral.allowmenu=false&" +
                "skin=http://streammonster.com/sm/pl5/stormtrooper.zip&file=" +
                url + ";stream.mp3&type=sound&buffer='Buffering:%10%'";

            mpl.setAttribute('flashvars', str);
            
            var logo = clone.getElementsByClassName("mix_logo")[0];
            var logo_url = e.icon;

            logo.style.cssText = 'background: url("' + logo_url + '")' +
                " no-repeat center center rgba(0, 0, 0, 0);border:1px solid;" +
                " background-size:contain;float:left;height:95%;width:95%;";
            
            var txt = clone.getElementsByClassName("station_text")[0];
            txt.innerHTML = '<a href="' + e.webpage + '">' + e.nickname + '</a>'

            clone.style.cssText = '';
            rds.appendChild(clone);
        }
});

$(window).load( function() {
        var all_players_block = $('.radio_button .player').hide();
        var all_players_button = $('.radio_button');
        $('.radio_button').click(function(e){
            var cur_radio = $(this).parent().find('.player'),
            isShowing = cur_radio.is(":visible");
            all_players_block.hide();
            all_players_button.removeClass('playing');
            if (!isShowing) {
                cur_radio.show();
                cur_radio.parent().addClass('playing');
            }
            e.preventDefault();
        });

        $('.mix_icons a').on('click', function(e){
            var target = $(this).attr('rel');
            var icon = $(this).find('div');
            icon.toggleClass( "active_icon" );
            $("#"+target).slideToggle();
        });
});

</script>
</head>

<body>
<div id='stations_list' class="main_block">

    <div class="radio_block" id='source_div' style="visibility: hidden">
        <div class="radio_button stop">
            <div class="player">
                <embed type="application/x-shockwave-flash" src="http://streammonster.com/sm/pl5/player.swf" style="undefined" id="mpl" name="mpl" quality="high" allowscriptaccess="always" allowfullscreen="true" flashvars="" width="310" height="25">
                </div>
            </div>
            <div class="mix_logo_wrapper">
                <div class="mix_logo"></div>
            </div>
            <div class="station_text">
            </div>
        </div>
    </div>
    </body>
</html>
